---
name: blog-write
description: 体験・試行錯誤ベースのブログ記事作成フロー（アウトライン→microCMSドラフト→レビューを一気通貫）
user-invocable: true
disable-model-invocation: true
allowed-tools: Read, Write, Glob, Grep, WebSearch, WebFetch, ToolSearch
---

# 体験ベース記事作成フロー

自由なテーマで、体験や試行錯誤の過程からブログ記事を作成します。
SEOキーワード起点ではなく「自分がやったこと」が出発点です。

**起動**: `/blog-write <テーマ>`（例: `/blog-write V60で抽出温度を5段階で比較した`）

ユーザーから以下の情報を受け取って記事化します:
- 記事の概要（何をしたか）
- 試行錯誤の過程（うまくいったこと、失敗したこと、気づき）

## Phase 1: ヒアリング

テーマだけ渡された場合、以下を質問して素材を集める:

1. **何をしたか**: ゴールと結果
2. **きっかけ**: なぜそれをやろうと思ったか
3. **過程**: 試したこと、失敗、発見（時系列で）
4. **結論**: 最終的にどうなったか、おすすめは何か
5. **読者へのメッセージ**: 同じことをやる人へのアドバイス

すでに十分な情報が渡されている場合はヒアリングをスキップしてPhase 2へ進む。

## Phase 2: アウトライン生成

ヒアリング結果 + WebSearchでの補足調査から構成を作る。

**WebSearchの使い方**:
- 同じテーマの既存記事を確認（差別化ポイントの把握）
- 技術的な裏付けや補足情報の収集
- 関連キーワードの把握（SEOは副次的、あくまで参考）

**出力フォーマット**:

```markdown
# アウトライン: [テーマ]

## 記事の方向性

- **切り口**: 体験談 / 検証レポート / 制作記録 / 解説+実践
- **読者が得るもの**: xxx
- **独自性**: xxx（実データ、失敗談、比較結果など）

## タイトル案（3パターン）

1. xxx
2. xxx
3. xxx

## メタディスクリプション

> xxx

## 見出し構成

### H2: リード（なぜこれをやったか）
- きっかけ、背景

### H2: [試行錯誤パート1]
#### H3: xxx
- やったこと、結果、気づき

### H2: [試行錯誤パート2]
...

### H2: 結論・まとめ
- 最終的な結果
- おすすめ・アドバイス

## 素材チェック

- [ ] 写真が必要な箇所
- [ ] データ・計測値が必要な箇所
- [ ] 補足調査が必要な箇所
```

アウトラインを提示し、ユーザーの承認を待つ。修正があれば反映する。

## Phase 3: ドラフト執筆 → microCMSに下書き作成

承認されたアウトラインから記事本文を作成し、microCMSに下書きとして投稿する。

### microCMS投稿手順

1. ToolSearchで `microcms create draft` を検索し、`mcp__microcms__microcms_create_content_draft` をロード
2. 以下の形式で下書き作成:
   ```
   endpoint: "blogs"
   content: {
     "title": "記事タイトル",
     "content": "<h2>見出し</h2><p>本文HTML...</p>"
   }
   ```
3. 作成成功後、返却された `id` を記録する（レビュー・更新で使用）
4. microCMSの管理画面URL: `https://aiirononeko.microcms.io/apis/blogs/{id}` を控える

### Linearタスク生成（プレースホルダー対応用）

ドラフト作成後、本文中のプレースホルダーを解析し、対応タスクをLinearに自動生成する。

1. ToolSearchで `linear create issue` を検索し、`mcp__linear__create_issue` をロード
2. 本文から `<!-- IMAGE: -->`, `<!-- YOUR_EXPERIENCE: -->`, `<!-- YOUR_DATA: -->`, `<!-- AFFILIATE: -->` を抽出
3. プレースホルダーごとにLinear Issueを作成:
   ```
   team: "Aiirononeko-private"
   title: "[記事タイトル短縮] プレースホルダー対応: [種類] - [説明]"
   description: |
     ## 対象記事
     - **タイトル**: [記事タイトル]
     - **microCMS管理画面**: https://aiirononeko.microcms.io/apis/blogs/{contentId}

     ## 対応内容
     - **種類**: [IMAGE / YOUR_EXPERIENCE / YOUR_DATA / AFFILIATE]
     - **箇所**: [該当セクション]
     - **説明**: [プレースホルダーの説明]

     ## 次のアクション
     1. microCMS管理画面で該当箇所を編集
     2. プレースホルダーコメントを削除し、実際のコンテンツに置換
     3. 全プレースホルダー対応後、`/blog-review` で品質チェック
     4. 問題なければ `/blog-publish` で公開
   assignee: "me"
   state: "Todo"
   priority: 3
   labels: ["ブログ"]
   ```
4. プレースホルダーが複数ある場合は、1つの親Issueにまとめてもよい:
   - 親Issue: `[記事タイトル短縮] 記事公開準備`（全プレースホルダーをチェックリストで列挙）
   - descriptionにすべてのプレースホルダーと次のアクションを記載
5. 絵文字はタイトルに使わない

**重要な注意点**:
- フィールド名は `title` と `content` のみ。`body`, `description` は存在しない（400エラー）
- `content` フィールドにはHTML文字列を渡す
- Management API（`get_api_list`, `get_api_info`）は403のため使用不可
- APIキーにPOST権限が必要（未設定の場合「POST is forbidden」エラー → ユーザーにmicroCMS管理画面での権限追加を依頼）

### 執筆ルール
- 「です・ます」調で統一
- 一文は60文字以内を目安
- 試行錯誤の過程をストーリーとして構成する
- 失敗や回り道もカットせず記事の価値として活かす
- ユーザーから受け取った体験・データはそのまま反映
- 不足している情報にはプレースホルダーを置く:
  - `<!-- YOUR_EXPERIENCE: 説明 -->` 体験の補足
  - `<!-- IMAGE: 説明 -->` 写真（管理画面から追加）
  - `<!-- YOUR_DATA: 説明 -->` 計測値・データ
  - `<!-- AFFILIATE: 商品名 -->` アフィリエイトリンク

## Phase 4: AI臭除去 & カタダ文体変換

ドラフト完成後、自動的にAI臭を除去し、カタダの文体に変換する。
`/blog-humanize` のSkillに定義されたルールに従って実施する。

### 変換の流れ

1. Phase 3で作成したドラフトの全文を対象とする
2. AI臭チェック（6カテゴリ）で問題箇所を検出
3. 「カタダ文体ルール」に従って全文を書き直す
4. microCMSの下書きを更新（`mcp__microcms__microcms_update_content_draft`）

### 変換時の厳守事項

- 事実関係・技術的内容は変えない
- 見出し構成は大きく変えない（表現は変えてOK）
- 文字数は元文から大きく増減させない（目安: ±20%以内）
- プレースホルダー（`<!-- IMAGE: -->` 等）はそのまま残す
- 元の文章にない数字・固有名詞・事例は足さない

### カタダ文体の要点（詳細は `/blog-humanize` のSKILL.mdを参照）

- 冒頭で軽く名乗る（「キッサカタダマスターのカタダです」など）
- 語尾に「〜ですよね」「〜なんですよね」「〜かなと」を混ぜる
- 熱い箇所は熱く、軽い箇所は軽く（温度差をつける）
- スタンスを取る。保険や逃げ文句を入れない
- 「参考になれば幸いです」等のテンプレ締めは使わない
- Markdown記法を残さない、「」（）の過剰使用を避ける

変換完了後、Before → Afterの例を2〜3個提示してからPhase 5に進む。

## Phase 5: レビュー

文体変換後、自動的にレビューを実施する。
microCMSから変換済みの記事を取得してレビューする。

**採点基準（100点満点）**:

| カテゴリ | 配点 | チェック内容 |
|---------|------|-------------|
| ストーリー性 | 20点 | 読者が追体験できる流れになっているか |
| 独自性・体験価値 | 20点 | 実データ、失敗談、独自の気づきが含まれるか |
| 読みやすさ | 15点 | 文の長さ、段落、箇条書き・表の活用 |
| SEO基本 | 15点 | タイトル、メタディスクリプション、見出し構成 |
| AI臭 | 20点 | AI臭が除去されカタダ文体になっているか |
| 完成度 | 10点 | プレースホルダーの残量、情報の網羅性 |

**AI臭チェック詳細**（20点内訳）:

| チェック項目 | 配点 |
|-------------|------|
| 記号の残存（`**`、emダッシュ、：半角スペース、／並列） | 3点 |
| 語尾のバリエーション（同一語尾3連続以上NG） | 3点 |
| 接続詞の過多 | 3点 |
| 前置き・宣言の説明書感 | 3点 |
| 事なかれ主義・抽象語の空回り | 4点 |
| カタダ文体との一致度 | 4点 |

**出力フォーマット**:

```markdown
# レビュー結果

📝 **記事**: [タイトル]（microCMS下書き）

## 総合スコア: XX / 100点

| カテゴリ | スコア |
|---------|--------|
| ストーリー性 | XX/20 |
| 独自性・体験価値 | XX/20 |
| 読みやすさ | XX/15 |
| SEO基本 | XX/15 |
| AI臭 | XX/20 |
| 完成度 | XX/10 |

## AI臭チェック詳細

### 検出されたAI臭表現
| # | 箇所 | 問題の表現 | 改善案 |
|---|------|-----------|--------|
（AI臭が残っていなければ「検出なし」と記載）

### カタダ文体の再現度
- [良い点・改善点を具体的に]

## 良い点
- ...

## 改善提案（優先度順）

### 🔴 必須
1. ...

### 🟡 推奨
1. ...

### 🟢 あると良い
1. ...

## 残りのプレースホルダー

| # | 種類 | 箇所 | 内容 |
|---|------|------|------|
| 1 | IMAGE | H2: xxx | 管理画面から写真を追加 |

## 次のステップ

- AI臭が残っている場合: `/blog-humanize` で再変換
- microCMS管理画面でプレースホルダーを埋める（画像追加など）
- 改善提案を反映する
- 修正後に再度 `/blog-review` で最終チェック
- 準備ができたら `/blog-publish` で公開
```

## フロー全体像

```
/blog-write <テーマ>
    │
    ├─ Phase 1: ヒアリング（必要に応じて）
    │
    ├─ Phase 2: アウトライン提示 → ユーザー承認
    │
    ├─ Phase 3: ドラフト執筆 → microCMSに下書き作成 → Linearタスク生成
    │
    ├─ Phase 4: AI臭除去 & カタダ文体変換 → microCMS下書き更新
    │
    └─ Phase 5: レビュー → スコア & 改善提案（AI臭チェック含む）
```

各フェーズの間でユーザーに確認を取りながら進める。
一気に進めたい場合は「全部おまかせで」と言ってもらえればPhase 2〜5を連続実行する。
